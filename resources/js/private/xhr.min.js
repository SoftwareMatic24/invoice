let xhrState={};function xhrRequest(t){LAST_BACKEND_INTERACTION_SINCE=0,setCookie("client_timezone",getTimezoneName());var e,r=getCookie("bt"),r=decodeURI(r);let{method:a="GET",url:s=null,body:o=null,headers:n={"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},withCredentials:l=null,stringify:i=null,progress:u=null,defaultAuhtorization:d=!0,id:h=uid(),target:c=null}=t,g=new XMLHttpRequest;for(e in g.open(a,s),null!==l&&(g.withCredentials=l),n)g.setRequestHeader(e,n[e]);return null!=r&&!1!==r&&!0===d&&g.setRequestHeader("Authorization","Bearer "+r),new Promise(function(a,t){try{g.upload.onloadstart=function(t){setXhrState("start",!0,h),xhrTargetOnLoadStart(c)},g.upload.onprogress=function(t){var e=t.total,t=t.loaded/e*100;null!==u&&document.querySelector(`[data-progress="${u}"]`).setAttribute("style",`--progress:${t}%`),setXhrState("progress",Math.ceil(t),h)},g.onload=function(t){var e=t.target.responseText,t=t.target.status;null!==u&&document.querySelector(`[data-progress="${u}"]`).setAttribute("style","--progress:0%"),setXhrState("complete",!0,h),xhrTargteFinish(c);let r=e;try{if(r=""!==e?JSON.parse(e):e,500===t)throw new Error("500 server error")}catch(t){}a({status:"success",msg:"completed",data:r})},g.onabort=function(){setXhrState("error",!0,h),xhrTargteFinish(c),a({status:"fail",msg:"abort"})},g.onerror=function(t){setXhrState("error",!0,h),xhrTargteFinish(c),a({status:"fail",msg:"error"})},null===(o=void 0!==i&&null!==i&&!0!==i?o:JSON.stringify(o))?g.send():g.send(o)}catch(t){setXhrState("error",!0),a({status:"fail",msg:"error"})}})}function setXhrState(t,e,r){return void 0===xhrState[r]&&(xhrState[r]={start:null,progress:null,complete:null,error:null}),xhrState[r][t]=e,xhrState}function xhrTargetOnLoadStart(t){document.querySelectorAll(`[data-xhr-name="${t}"]`).forEach(e=>{var t=e.getAttribute("data-xhr-loading.class"),r=e.getAttribute("data-xhr-loading.attr");isEmpty(t)||e.classList.add(t.split(" ")),isEmpty(r)||r.split(" ").forEach(t=>e.setAttribute(t,""))})}function xhrTargteFinish(t){document.querySelectorAll(`[data-xhr-name="${t}"]`).forEach(e=>{var t=e.getAttribute("data-xhr-loading.class"),r=e.getAttribute("data-xhr-loading.attr");isEmpty(t)||e.classList.remove(t.split(" ")),isEmpty(r)||r.split(" ").forEach(t=>e.removeAttribute(t))})}